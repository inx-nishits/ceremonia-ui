<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Tone - CeremonIA</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../../assets/images/favicon/favicon.png">
    <link rel="apple-touch-icon" href="../../assets/images/favicon/favicon.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../../assets/js/tailwind.config.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Montserrat:wght@300;400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/main.css">
</head>

<body class="bg-cream min-h-screen py-8 px-6 md:px-12 flex flex-col items-center relative">

    <!-- Nav -->
    <nav class="absolute top-0 w-full p-4 md:p-8 flex justify-between items-center z-20">
        <a href="../../index.html" class="block flex-shrink-0">
            <img src="../../assets/images/approved-logo.svg" alt="CeremonIA"
                class="h-12 md:h-16 w-auto max-w-[120px] md:max-w-none">
        </a>
        <button onclick="window.history.back()"
            class=" text-[10px] md:text-xs uppercase tracking-[0.2em] text-taupe hover:text-charcoal transition-colors whitespace-nowrap ml-2">Back</button>
    </nav>

    <!-- Progress and Auto-Save -->
    <div
        class="absolute top-16 md:top-20 left-4 md:left-8 lg:left-12 right-4 md:right-8 lg:right-12  text-[10px] md:text-xs uppercase tracking-[0.2em] text-taupe z-20">
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
            <span class="whitespace-nowrap">Progress 90%</span>
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" checked disabled
                    class="w-3 h-3 md:w-4 md:h-4 text-plum border-beige rounded focus:ring-plum">
                <span class="text-[10px] md:text-xs normal-case">Answers auto-saved securely</span>
            </label>
        </div>
    </div>

    <!-- Header -->
    <div class="text-center mt-24 md:mt-28 mb-8 md:mb-12 px-4 animate-[fadeInUp_0.5s_ease-out]">
        <h1 class="font-goldney text-5xl md:text-6xl text-charcoal mb-8">Choose Your Ceremony Style</h1>
        <p class=" text-sm text-taupe max-w-2xl mx-auto">These filters help us shape the tone and
            personality of your text. Select one option from each category to continue.</p>
    </div>

    <!-- Tone Section -->
    <div class="w-full max-w-[1400px] mb-16">
        <h2 class=" text-sm uppercase tracking-[0.2em] text-taupe mb-4 text-center">Tone</h2>
        <p class=" text-xs text-taupe mb-8 text-center">Select the primary emotional feel of the ceremony.
        </p>
        <div
            class="grid grid-cols-1 md:grid-cols-3 w-full border-t border-l border-beige animate-[fadeInUp_0.8s_ease-out]">

            <!-- Option 1: Romantic -->
            <label
                class="group relative aspect-[3/4] border-r border-b border-beige cursor-pointer transition-all duration-500 hover:bg-white">
                <input type="radio" name="tone" value="romantic" class="peer sr-only" onchange="checkFiltersComplete()">

                <!-- Default State -->
                <div
                    class="absolute inset-0 flex flex-col justify-between p-12 transition-opacity duration-300 group-hover:opacity-0">
                    <span class=" text-xs uppercase tracking-widest text-taupe">No. 1</span>
                    <span class="font-goldney text-4xl text-charcoal">Romantic</span>
                </div>

                <!-- Hover/Selected State (Light Purple) -->
                <div
                    class="absolute inset-0 bg-lavender flex flex-col justify-center items-center p-12 text-center opacity-0 group-hover:opacity-100 peer-checked:opacity-100 transition-all duration-500">
                    <h3 class="font-goldney text-4xl text-charcoal italic mb-6">Romantic</h3>
                    <p class=" text-xs text-charcoal/70 leading-loose max-w-xs">Poetic, sweeping, and deeply
                        emotional.
                        Focuses on destiny and soul connections.</p>
                </div>
            </label>

            <!-- Option 2: Formal -->
            <label
                class="group relative aspect-[3/4] border-r border-b border-beige cursor-pointer transition-all duration-500 hover:bg-white">
                <input type="radio" name="tone" value="formal" class="peer sr-only" onchange="checkFiltersComplete()">

                <!-- Default State -->
                <div
                    class="absolute inset-0 flex flex-col justify-between p-12 transition-opacity duration-300 group-hover:opacity-0">
                    <span class=" text-xs uppercase tracking-widest text-taupe">No. 2</span>
                    <span class="font-goldney text-4xl text-charcoal">Formal</span>
                </div>

                <!-- Hover/Selected State (Inverted) -->
                <div
                    class="absolute inset-0 bg-lavender flex flex-col justify-center items-center p-12 text-center opacity-0 group-hover:opacity-100 peer-checked:opacity-100 transition-all duration-500">
                    <h3 class="font-goldney text-4xl text-charcoal italic mb-6">Formal</h3>
                    <p class=" text-xs text-charcoal/70 leading-loose max-w-xs">Traditional, elegant, and
                        respectful.
                        Honors ceremony traditions with dignity.</p>
                </div>
            </label>

            <!-- Option 3: Custom -->
            <label
                class="group relative aspect-[3/4] border-r border-b border-beige cursor-pointer transition-all duration-500 hover:bg-white">
                <input type="radio" name="tone" value="custom" class="peer sr-only"
                    onchange="handleCustomSelection('tone'); checkFiltersComplete()">

                <!-- Default State -->
                <div
                    class="absolute inset-0 flex flex-col justify-between p-12 transition-opacity duration-300 group-hover:opacity-0 peer-checked:opacity-0">
                    <span class=" text-xs uppercase tracking-widest text-taupe">No. 3</span>
                    <span class="font-goldney text-4xl text-charcoal">Custom</span>
                </div>

                <!-- Hover/Selected State -->
                <div
                    class="absolute inset-0 bg-lavender flex flex-col justify-center items-center p-8 text-center opacity-0 group-hover:opacity-100 peer-checked:opacity-100 transition-all duration-500 z-10">
                    <h3 class="font-goldney text-3xl text-charcoal italic mb-4">Custom Tone</h3>
                    <p class=" text-xs text-charcoal/70 mb-4">Define your own unique atmosphere.</p>
                    <textarea id="custom-tone-text" placeholder="Describe your desired tone..."
                        class="w-full bg-white border border-beige p-3 text-sm focus:border-plum outline-none resize-none rounded h-24"
                        oninput="checkFiltersComplete()"
                        onclick="event.stopPropagation(); document.querySelector('input[name=\'tone\'][value=\'custom\']').checked = true; checkFiltersComplete();"></textarea>
                </div>
            </label>
        </div>
    </div>

    <!-- Writing Style Section -->
    <div class="w-full max-w-[1400px] mb-16">
        <h2 class=" text-sm uppercase tracking-[0.2em] text-taupe mb-4 text-center">Writing Style</h2>
        <p class=" text-xs text-taupe mb-8 text-center">Choose the literary approach for the script.</p>
        <div
            class="grid grid-cols-1 md:grid-cols-3 w-full border-t border-l border-beige animate-[fadeInUp_0.8s_ease-out]">

            <!-- Option 1: Poetic & Lyrical -->
            <label
                class="group relative aspect-[3/4] border-r border-b border-beige cursor-pointer transition-all duration-500 hover:bg-white">
                <input type="radio" name="writingStyle" value="poetic" class="peer sr-only"
                    onchange="checkFiltersComplete()">

                <!-- Default State -->
                <div
                    class="absolute inset-0 flex flex-col justify-between p-12 transition-opacity duration-300 group-hover:opacity-0">
                    <span class=" text-xs uppercase tracking-widest text-taupe">No. 1</span>
                    <span class="font-goldney text-4xl text-charcoal">Poetic & Lyrical</span>
                </div>

                <!-- Hover/Selected State (Light Purple) -->
                <div
                    class="absolute inset-0 bg-lavender flex flex-col justify-center items-center p-12 text-center opacity-0 group-hover:opacity-100 peer-checked:opacity-100 transition-all duration-500">
                    <h3 class="font-goldney text-4xl text-charcoal italic mb-6">Poetic & Lyrical</h3>
                    <p class=" text-xs text-charcoal/70 leading-loose max-w-xs">Lyrical, metaphorical, and rich
                        with imagery. Evokes emotion through beautiful language.</p>
                </div>
            </label>

            <!-- Option 2: Narrative Storytelling -->
            <label
                class="group relative aspect-[3/4] border-r border-b border-beige cursor-pointer transition-all duration-500 hover:bg-white">
                <input type="radio" name="writingStyle" value="narrative" class="peer sr-only"
                    onchange="checkFiltersComplete()">

                <!-- Default State -->
                <div
                    class="absolute inset-0 flex flex-col justify-between p-12 transition-opacity duration-300 group-hover:opacity-0">
                    <span class=" text-xs uppercase tracking-widest text-taupe">No. 2</span>
                    <span class="font-goldney text-4xl text-charcoal">Narrative Storytelling</span>
                </div>

                <!-- Hover/Selected State (Light Purple) -->
                <div
                    class="absolute inset-0 bg-lavender flex flex-col justify-center items-center p-12 text-center opacity-0 group-hover:opacity-100 peer-checked:opacity-100 transition-all duration-500">
                    <h3 class="font-goldney text-4xl text-charcoal italic mb-6">Narrative Storytelling</h3>
                    <p class=" text-xs text-charcoal/70 leading-loose max-w-xs">Story-driven and descriptive.
                        Tells
                        your journey with clarity and warmth.</p>
                </div>
            </label>

            <!-- Option 3: Custom -->
            <label
                class="group relative aspect-[3/4] border-r border-b border-beige cursor-pointer transition-all duration-500 hover:bg-white">
                <input type="radio" name="writingStyle" value="custom" class="peer sr-only"
                    onchange="handleCustomSelection('style'); checkFiltersComplete()">

                <!-- Default State -->
                <div
                    class="absolute inset-0 flex flex-col justify-between p-12 transition-opacity duration-300 group-hover:opacity-0 peer-checked:opacity-0">
                    <span class=" text-xs uppercase tracking-widest text-taupe">No. 3</span>
                    <span class="font-goldney text-4xl text-charcoal">Custom</span>
                </div>

                <!-- Hover/Selected State (Light Purple) -->
                <div
                    class="absolute inset-0 bg-lavender flex flex-col justify-center items-center p-8 text-center opacity-0 group-hover:opacity-100 peer-checked:opacity-100 transition-all duration-500 z-10">
                    <h3 class="font-goldney text-3xl text-charcoal italic mb-4">Custom Style</h3>
                    <p class=" text-xs text-charcoal/70 mb-4">Define your own unique writing style.</p>
                    <textarea id="custom-style-text" placeholder="Describe your desired style..."
                        class="w-full bg-white border border-beige p-3 text-sm focus:border-plum outline-none resize-none rounded h-24"
                        oninput="checkFiltersComplete()"
                        onclick="event.stopPropagation(); document.querySelector('input[name=\'writingStyle\'][value=\'custom\']').checked = true; checkFiltersComplete();"></textarea>
                </div>
            </label>
        </div>
    </div>

    <div class="mt-20 mb-20 flex justify-end items-center gap-4 px-6 md:px-12">
        <button id="back-filter-btn" onclick="window.history.back()"
            class=" text-xs uppercase tracking-[0.2em] text-taupe hover:text-charcoal transition-colors">Back
            Block</button>
        <div class="flex flex-col items-end">
            <button id="generate-button" onclick="generateStory()" disabled
                class="bg-plum text-white  text-xs uppercase tracking-[0.25em] px-12 py-4 hover:bg-plum transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed">Generate
                Ceremony Text</button>
            <p id="filter-error" class="text-xs text-taupe mt-4 hidden text-right">Please select one option from
                each category.</p>
        </div>
    </div>

    <script src="../../assets/js/mock-data.js"></script>
    <script>
        // Load saved filter selections
        function loadSavedFilters() {
            const savedTone = localStorage.getItem('selectedTone');
            const savedWritingStyle = localStorage.getItem('selectedWritingStyle');

            if (savedTone) {
                // Check if it matches a preset
                const toneRadio = document.querySelector(`input[name="tone"][value="${savedTone}"]`);
                if (toneRadio) {
                    toneRadio.checked = true;
                } else {
                    // Custom
                    const customRadio = document.querySelector('input[name="tone"][value="custom"]');
                    if (customRadio) {
                        customRadio.checked = true;
                        document.getElementById('custom-tone-text').value = savedTone;
                    }
                }
            }

            if (savedWritingStyle) {
                // Check if it matches a preset
                const styleRadio = document.querySelector(`input[name="writingStyle"][value="${savedWritingStyle}"]`);
                if (styleRadio) {
                    styleRadio.checked = true;
                } else {
                    // Custom
                    const customRadio = document.querySelector('input[name="writingStyle"][value="custom"]');
                    if (customRadio) {
                        customRadio.checked = true;
                        document.getElementById('custom-style-text').value = savedWritingStyle;
                    }
                }
            }

            checkFiltersComplete();
        }

        function checkFiltersComplete() {
            const tone = document.querySelector('input[name="tone"]:checked');
            const writingStyle = document.querySelector('input[name="writingStyle"]:checked');

            let toneValid = false;
            let styleValid = false;

            if (tone) {
                if (tone.value === 'custom') {
                    const customToneText = document.getElementById('custom-tone-text').value.trim();
                    toneValid = customToneText.length > 0;
                } else {
                    toneValid = true;
                }
            }

            if (writingStyle) {
                if (writingStyle.value === 'custom') {
                    const customStyleText = document.getElementById('custom-style-text').value.trim();
                    styleValid = customStyleText.length > 0;
                } else {
                    styleValid = true;
                }
            }

            const generateButton = document.getElementById('generate-button');
            const errorMessage = document.getElementById('filter-error');

            if (toneValid && styleValid) {
                generateButton.disabled = false;
                errorMessage.classList.add('hidden');
            } else {
                generateButton.disabled = true;
                if ((tone || writingStyle) && (!toneValid || !styleValid)) {
                    // Optional: show specific message
                }
            }
        }

        function generateStory() {
            const toneRadio = document.querySelector('input[name="tone"]:checked');
            const styleRadio = document.querySelector('input[name="writingStyle"]:checked');

            if (!toneRadio || !styleRadio) {
                document.getElementById('filter-error').classList.remove('hidden');
                return;
            }

            let toneValue = toneRadio.value;
            if (toneValue === 'custom') {
                toneValue = document.getElementById('custom-tone-text').value.trim();
                if (!toneValue) {
                    alert("Please describe your custom tone.");
                    return;
                }
            }

            let styleValue = styleRadio.value;
            if (styleValue === 'custom') {
                styleValue = document.getElementById('custom-style-text').value.trim();
                if (!styleValue) {
                    alert("Please describe your custom writing style.");
                    return;
                }
            }

            // Save filter selections
            localStorage.setItem('selectedTone', toneValue);
            localStorage.setItem('selectedWritingStyle', styleValue);
            localStorage.setItem('ceremonyGenerated', 'false');

            // Redirect to generating page
            window.location.href = '../ceremony/generating.html';
        }

        function handleCustomSelection(type) {
            // Helper to focus input when radio is clicked
            if (type === 'tone') {
                setTimeout(() => document.getElementById('custom-tone-text').focus(), 100);
            } else {
                setTimeout(() => document.getElementById('custom-style-text').focus(), 100);
            }
        }

        // Load saved filters on page load
        document.addEventListener('DOMContentLoaded', function () {
            loadSavedFilters();
        });
    </script>

</body>

</html>